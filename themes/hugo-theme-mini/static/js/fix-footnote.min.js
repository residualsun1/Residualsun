(e => {
    e.querySelectorAll('sup[id^="fnref:"] > a.footnote-ref, a.footnote-ref > sup, span.bg-number').forEach((el => {
        if (/^[0-9]+$/.test(el.innerText)) {
            el.innerText = `[${el.innerText}]`;
            el.parentNode.before(e.createTextNode(" "));
        }
    }));
    e.querySelectorAll(".footnotes > ol > li > p ~ .footnote-return").forEach((el => {
        el.previousElementSibling.lastChild.after(el);
    }));
})(document);